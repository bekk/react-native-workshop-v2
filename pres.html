<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="http://bekk.github.io/react-native-workshop/slides/remark-bekk/dist/bekk.css">
    <title>Title</title>
    <meta charset="utf-8">
  </head>
  <body>
    <textarea id="source">

class: front-page

# React Native
## Workshop

Fagdag

01.09.2017
---
class: agenda

# Agenda

* Intro
* Syntax og styling
* Navigasjon
* Kart
* Code push

---
#Crossplatform navigation

## Samme kode skal fungere til både iOS og Android
## Stylingen bør være forskjellig på iOS og Android for å få "Native app feeling"

---
#Crossplatform navigation

##React-native rammeverket gav opp sin egen crossplatform navigasjonsløsning.

##Anbefaler heller community løsninger hvor den foretrukken er React Navigation

`This guide covers the various navigation components available in React Native.
If you are just getting started with navigation, you will probably want to use React Navigation.
`
???
react-native hadde sin egen cross platform navigasjonsløsning. Men den var nokså buggy og ofte inkonsistent i forhold til det som var doukemtert.
Flere alternativer dukket opp som en respons og tidligere i år, gav react-native opp sin egen løsning og refererte heller til community løsninger.

---
#React Navigation

##Startet på slutten av 2016 og er fremdeles i beta

* StackNavigation
* TabNavigation
* DrawerNavigation

???
Forsatt veldig nytt, starter på slutten av 2016 og ble veldig populær.
De har forsatt ikke sendt ut en stable versjon.

Hitil så har de lagd 3 forskjellige type navigation. StackNavigator, TabNavigation, DrawerNavigation.
Om du har jobba med native android kode, så ringer det kanskje en bjelle.

---
#StackNavigation

##Plasserer sidene i en stack og pusher/popper når du navigerer fra/til en annen side.

##Må vite hvilken sider/komponenter skal eksisterer i appen på forhånd.
```
const Navigation = StackNavigator({
  Key1: { screen: Komponent1},
  Key2: { screen: Komponent2},
  Key3: { screen: Komponent 3}
});
```

???
I dag så skal vi kun se på StackNavigator. Det er hovedsaklig en sånn løsning iOS apper bruker for navigasjon,
og en stor andel av android apper.

StackNavigator trenger å vite på forhånd hvilken komponenter skal være tilgjengelig.
Key er verdien som skal brukes når man ønsker å navigerer til gitte komponent.
Det er mulig å bruke stackNavigation på nett, da benytter man path istedenfor screen.


---
#StackNavigation

##Legge til i render metoden til main-fila.
```
class Main extends React.Component {
  render(){
    return(
      <Provider store={todoStore}>
        <Navigation/>
      </Provider>
  )}}
```
---
#StackNavigation

##Eksponerte funksjoner og state kan nåes via:
```
this.props.navigation
```
##Push
```
this.props.navigation.navigate('Key1')
```

##Pop
```
goBack()
goBack('Key2') //Go back to the component that navigated to key2 o.O
```


???
Alle komponenter som har blitt lagt til StackNavigation har tilgang til
this.props.navigation som da inneholder funksjon for a navigere til ny komponenter,
go tilbake til forrige komponent, legge til og hente ut objekt som er sendt fra en komponent til annen komponent.

---
#StackNavigation
##Views kan tilpasse navigasjonsbaren via static navigationOptions:
```
class Home extends React.Component {
  static navigationOptions = ({ navigation }) => {
      return({
        title: 'Home'
        .
        .
      })
    };
  .
  .
  .
```
???
Det som skiller seg ut er at man må legge til funksjonen static navigationOptions for å tilpasse navigasjonsbaren.

##static navigationOptions har IKKE tilgang til viewet sitt state eller props direkte.

---
#Oppgave 1

##Todos skal være klikkbare og lede til en ny side, hvor todo-name skal være tittelen på siden i navigasjonsbaren.


##Sjekk ut branchen navigation
```
git checkout navigation
```


##Oppgave beskrivelse:  https://goo.gl/TaEfY9


---
# Oppgave 1 - Løsningsforslag

##Bruke navigate funksjonen som vi får fra StackNavigator via this.props.navigation
##Sende med todo objektet som en parameter
```
renderRow = ({item}) => {
  const { navigate } = this.props.navigation;
  return(
      <Button
        onPress={() => navigate('TodoDetail', { todo: item })}
        title={item.name}
      />
  )
}
```
---
# Oppgave 1 - Løsningsforslag

## Henter ut todo objektet i static navigationOptions metoden
## Setter navnet på navigasjonsbaren til todo.name

```
class TodoDetail extends React.Component {

  static navigationOptions = ({ navigation }) => {
    const {todo} =  navigation.state.params
    return({
      title: todo.name,
    })
  };
  .
  .
}
```
---
# Oppgave 1 - Løsningsforslag

## Henter ut todo objektet i render metoden og bruke todo.detail
```
class TodoDetail extends React.Component {
  .
  .
  render(){
    const {todo} = this.props.navigation.state.params;
    return(
      <Text style={{padding:10}}>{todo.detail}</Text>
    );
  }
}
```
---
#StackNavigator

##Kan legge til knapp på venstre side

```
static navigationOptions = ({ navigation }) => {
  return({
    headerLeft: <Button>...,
  })
};
```


##Kan også legge til knapp på høyre side
```
static navigationOptions = ({ navigation }) => {
  return({
    headerRight: <Button>...,
  })
};
```
---
#StackNavigator

##static navigationOptions har IKKE tilgang til viewet sitt state eller props direkte.

##Viewet må sende dette inn via setParams funksjonen

```
this.props.navigation.setParams({name:value})
```

##Kan deretter hentes ut fra navigation.state.params

```
static navigationOptions = ({ navigation }) => {
 navigation.state.params..
```

---
#Oppgave 2

##Legg til en knapp på navigasjonsbaren som fører til en ny side.
##Den nye siden skal la brukerene legge til flere todos

##Oppgave beskrivelse: https://goo.gl/qSgGeb

---

# Oppgave 2 - Løsningsforslag

##Legg til knapp som leder til nye komponenten
```
class TodoListContainer extends React.Component {
  static navigationOptions = ({ navigation }) => {
    return({
      title: `TodoList`,
      headerRight: <Button title="+" onPress={()
        => navigation.navigate('AddTodo')}/>
      }
    )
  }
  .
  .
```
---
# Oppgave 2 - Løsningsforslag

## Ikke så happy når vi prøver å returnere state.params.x som ikke eksisterer.
```
static navigationOptions = ({ navigation }) => {

  let addTodo;
  let todoName;
  let todoDetail;

  if(navigation.state.params){
    todoName = navigation.state.params.todoName
    todoDetail = navigation.state.params.todoDetail;

    if(navigation.state.params.addTodo){
      addTodo = navigation.state.params.addTodo;
    }
  }

```
---
# Oppgave 2 - Løsningsforslag
## Må oppdatere navigation.param
```
onChangeName(name){
  this.setState({name:name});
  this.props.navigation.setParams({todoName:name})
}

onChangeDetail(detail){
  this.setState({detail:detail});
  this.props.navigation.setParams({todoDetail:detail})
}
```
---
# Oppgave 2 - Løsningsforslag

## Må bruke .reset for å tvinge StackNavigator til å få Home komponenten til å kjøre gjennom react-lifecycle o.O

```
static navigationOptions = ({ navigation }) => {
  .
  .

  return({
    title: `Add new task`,
    headerRight: <Button title="Done"
      disabled={(!todoName || !todoDetail)} onPress={() =>
        addTodo({name: todoName, detail: todoDetail},
          navigation.dispatch(NavigationActions.reset({
            index: 0,
            actions: [NavigationActions.navigate({ routeName: 'Home'})]
          }))
    )}/>
  })

```


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
